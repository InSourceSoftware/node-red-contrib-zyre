<script type="text/javascript">
  RED.nodes.registerType('zyre-disconnect', {
    category: 'Zyre',
    color: '#a6bbcf',
    defaults: {
      name: {
        value: 'disconnect',
        required: true
      },
      zyre: {
        value: '',
        type: 'zyre-peer',
        required: true
      }
    },
    inputs: 0,
    outputs: 1,
    icon: 'zeromq.png',
    label: function () {
      return this.name || 'zyre-disconnect'
    }
  })
</script>

<script type="text/html" data-template-name="zyre-disconnect">
  <div class="form-row">
    <label for="node-input-zyre"><i class="fa fa-server"></i> Zyre Peer</label>
    <select id="node-input-zyre"></select>
  </div>
  <div class="form-row">
    <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-input-name" placeholder="Name">
  </div>
</script>

<script type="text/html" data-help-name="zyre-disconnect">
  <p>Get notified when a peer disconnects from the Zyre network.</p>

  <h3>Outputs</h3>
  <dl class="message-properties">
    <dt>topic <span class="property-type">string</span></dt>
    <dd>The identity of the peer that disconnected from the Zyre network.</dd>
    <dt>payload <span class="property-type">object</span></dt>
    <dd>Information about the disconnected peer, including <code>identity</code> and <code>name</code>.</dd>
  </dl>

  <h3>Details</h3>
  <p>This node outputs a message whenever a peer disconnects from the Zyre network, and is sent after the expired message if applicable. If you captured headers from the connect event, use this node to clean up flow or global variables.</p>
</script>
